{"version":3,"sources":["js/setAttribute.js","js/patch.js","js/diff.js","js/render.js","js/index.js"],"names":["setAttribute","dom","key","value","test","toLowerCase","style","cssText","cssname","removeAttribute","module","exports","__render","require","__rende","_","each","array","fn","i","len","length","REPLACE","REORDER","PROPS","TEXT","patch","node","patches","walker","index","dfsWalk","currentPatches","childNodes","child","applyPatches","currentPatch","type","newNode","document","createTextNode","parentNode","replaceChild","setProps","props","textContent","content","nodeValue","Error","diff","oldTree","newTree","oldNode","push","String","tag","propsPatches","diffProps","diffChildren","children","oldChildren","newChildren","forEach","newChild","count","oldProps","attrs","newProps","hasOwnProperty","vnode","textNode","component","createComponent","setComponentProps","base","createElement","Object","keys","render","container","appendChild","inst","prototype","constructor","componentWillMount","componentWillReceiveProps","renderComponent","renderer","componentWillUpdate","_d","preVnodeTree","componentDidUpdate","componentDidMount","Component","state","stateChange","assign","React","Welcome","name","Welcome2","ReactDOM","innerHTML","getElementById","Counter","num","console","log","setState","onClick","bind","d1","d2","a"],"mappings":"AEAA,ADAA,ICAMsB,ADAAV,OCAO,CDAC,ECAE,CAAhB,ADAiBC,OAAO,CAAC,UAAD,CAAP,CAAoBC,OAArC;ACCA,IAAMS,OAAO,GAAG,CAAhB;AACA,ADDA,ADDA,IEEMC,ADDAxB,KCCK,AFFFA,GEEK,CAAd,GDDkB,GAAGa,EDDrB,CAAsBZ,GAAtB,CCC4B,CAAC,ADDFC,GAA3B,EAAgCC,KAAhC,EAAuC,ICCX,CAA5B;ACEA,AFFI,IEEEsB,EFFCvB,EEEG,CFFA,EEEG,CAAb,EFFe,WAAX,EAAwBA,GAAG,GAAG,OAAN;AEI5B,ADFA,ICEMwB,ADFAX,CAAC,GAAG,CCEC,CDFX,ECEc,EAAd;AAEAW,AFJI,KEIC,CAACJ,AFJC,OEIP,CFJelB,EEICkB,EFJT,CAAapB,GAAb,CEIP,AFJI,EAAsB;AEK1BwB,ADJAX,AEJA,AHIQb,CCAP,CAACc,EEJIhB,AHIEE,CEIH,CAACqB,ADJN,CDAW,ECAF,CDAKrB,GEId,AFJiB,CAACG,EEIFkB,ACRE,EFIAP,CEJGH,GFIZ,CCIT,ADJuBI,EDAT,CGJc,CAAC,AHIrB,CCAC,EAAqBC,EAArB,EAAyB,SEJN,CAA5B;ADSAQ,ADJI,ADAIzB,IAAAA,CEIH,CAACuB,CDJE,ADAG,CAACtB,GEIZ,ADJYiB,ADAD,CCAE,ADAL,EEIMK,CDJE,ADAGrB,CCAX,EAAWiB,CCInB,CFJwB,CCAF,GAAGH,ADAG,EAApB,GCAsB,CAACI,MAA3B,EAAmCF,CAAC,GAAGC,GAAvC,EAA4CD,CAAC,EAA7C,EAAmD;ACKvDO,ADJQR,AELR,AHKK,GAHD,CCGIA,AELFQ,CDSD,CAACD,ADJI,CAACR,EELA,AHKA,CEIX,EDJgB,AELFJ,CDSDY,ADJIN,ADAHjB,CCAE,CAAN,CDAO,CEIjB,ADJqBiB,CAAX,CAAF,AELa,AHKD,CGLE,MHKX,EAAkB,CGLR,CAArB;AFMK,ADAG,QAAG,CAAChB,KAAD,IAAU,OAAOA,KAAP,KAAiB,QAA9B,EAAwC;AEKhD,ADJC,AEND,AHMYF,CCJZ,GEFMgD,EHMMhD,EGNF,CDUDgD,AFJM,CAAC3C,CGNHO,EDUb,CAAcqC,CFJF,CAAU3C,EGNF,CAAC,EDUrB,EAAuB4C,AFJX,GAAoBhD,CGNZ,CAApB,EDUA,CFJqC,CEIL,GFJS,EAA7B;AEKR,AFJK,KAFD,CEMA0B,KFJO,CEID,GAAG,AFJE1B,KAAK,IAAI,QAAOA,KAAP,MAAiB,QAA9B,EAAwC;AEIrC2B,ADHlB,AENA,AHMY,IEGMA,ADHZR,KCGiB,ACTdV,EDSgB,ADHZ,ADAG,GCAA,CAAhB,ADAoBJ,EGNpB,CAAkB6D,IHMN,CGNZ,EAAyB,CHMMlE,KAAnB,EAA0B;AEGrB,ADFjB,AELI,AHKYF,GEEZ,CDFEsB,EELC,EHKStB,GCAH,ADAM,CAACK,CGLN+D,CFKE,CAAhB,EDAgB,CGLT,AHKmB7D,KGLF,EHKR,IAAqBL,EGLjC,EAA8B,CHKQ,CAACK,OAAD,CAAL,WAAwBL,KAAK,CAACK,OAAD,CAA7B,MAA2C,QAA3C,GAAsD,IAAtD,GAA6D,EAAlF;AEGZ,ADFJ,AELQ6D,AHKK,ICAP7C,AELE6C,EDOAzC,GDFG,AELE,GFKC,AELE0B,CDOD,ADFf,GCEkB,EAAd,ACPkB,CAACe,KAAD,CAAd;ADQJtC,ADFJ,AELK,AHKI,EEELA,EDFEN,IAAI,CCEC,CAACyB,CDFC,CAAb,KCEW,EAAUC,OAAV,EAAmBtB,MAAnB,EAA2BD,OAA3B,CAAP;AACA,AFFC,GARM,MEUAA,AFFA,OEEP;AACH,ADFD,AELI,AHKI,MGLD,EHKI1B,CCAFwB,EDAK,EGLA2C,CFKd,CAAe1C,ADAG1B,GGLX,AHKC,CCAR,CDAuB,CCAF2B,EELG,KFKxB,EAA8B,CEL1B,EAA8B;ACVlC,AHgBI,AELI,AHKI3B,IIhBN6E,EHgBEjD,ADAI5B,EGLEqE,CHKC,CAACpE,CIhBJ,CHgBE,CDAC,CIhBAW,AJgBH,CCAK,CELK,CHKCV,EGLEoC,ECXH,CAAC,AJgBK,IAAI,CGLC,CAACC,AHKtB,IIhBU,CAAP,CAAoBsC,MAAnC,EDWyB,CAAwBT,KAAxB,CAAjB;ADQR,ADHkBvC,AEJV,AHKC,ICDSA,KCGTC,ADHc,EAAE,AEJVuC,KDOf,CAAiBlB,ECPT,KDOR,EAA0Bd,OAA1B,EAAmCT,MAAnC,EAA2CD,OAA3C,EAAoD;AAChD,AEnBJ,AHeiB,AEHZ,GFGD,CGfE0D,EFmBElD,YAAY,CEnBC,EFmBE,CEnBCvB,CFmBpB,MEnB2B,CAAC,UAAD,CAAP,CAAoByE,eAA5C;AFoBI,ADJAvD,ADEI,ECFJA,ICIID,EFFG3B,CCFA,CAACwB,CCIC,EFFL,CEEQE,ADJL,CDEO,CCFAA,ICII,CAACC,CDJZ,EAAeF,ECItB,KDJO,CAAP;AGfJ,AHgBI,AEHA,AHKQ3B,IIlBN4F,EDaC,AHKK5F,GCFD0B,ADEI,CAAC3B,GIlBD,AHgBX,AEHUqE,GCbIxD,EDaC,CAAC0C,GAAb,AHKK,CIlBa,AJkBIrD,CIlBH,EJkBd,CGLgB,CHKMC,KAAtB,CIlBa,CAAP,CAAoB0F,CDalC,EAAoC,MCbxC;AFqBI,ADJH,AEHO,AHKC,KAFD,CEIDvD,ECPOiC,GHKC,EEED,ICPS,CDOJ,ECPOC,EDOtB,EAAqB,CAEpB,CAFD,MAEO,GCT8B,CDS1B,ACT2BH,KAAK,CAACd,CDS1BH,ECTmB,EAAYiB,GDStC,ECT2C,CAACH,EDSzB,GCTO,CAAjC,IDSO,IAA+B,OAAO5B,OAAP,KAAmB,QAAnD,IAAiE,OAAOc,OAAP,KAAmB,QAAnB,IAA+B,OAAOd,OAAP,KAAmB,QAAtH,EAAiI;AACpI,AEvBR,ADcQmC,AHKIxE,IInBNgD,ADcEwB,EHKIxE,EEIDqC,AEvBD,CJmBK,CAAC7B,CInBHI,IFuBK,GEvBE,CAAC,CFuBEuC,CCTE,CAACmB,GHKd,CAAoBrE,CEIxB,AEvBY,CAApB,CFuBgC,AFJpB,EGLa,EAAYmE,KAAK,CAACH,KAAlB,CAAjB;ADUI9B,ADNZ,AEHQ,AHKC,MEIGA,GDNHL,EEHMwC,KFGf,CAAiB5C,CCMO,CAAC0B,CCTD,CFGxB,AEHyBqB,EDSb,ADNW7C,CCMO,CCTtB,IFGR,EAA+BD,OAA/B,EAAwC;ACMTS,AEtB/B,AHiBI,AEHC,AHKA,MCFGL,ECKuBK,CEtBtBsC,GFsB0B,EAAEjD,KAAK,CAACD,ADLrB,EGjBtB,CAAuB8B,AHiBE3B,CCKK,EEtB9B,EAA4BsC,EHiBI,CAACrC,EGjBjC,EAAgD,EHiBT,CAACC,KAAR,CAA5B;ACK6CgB,AEtBD,AHmB5C,ADEH,MCFO1B,ECGyC0B,CDHtC,GAAGnB,GCG0C,CDHtC,CCGwC2B,ADHvCrB,MCG6C,CAACK,GDHnD,GAAkBX,CCGgC,GDH5B,CAACM,CGnBC0B,QAAU,CHmBhB,CAAgBtC,MAAlC,GAA2C,CAArD;ACG0B,AEtBQsC,ADgBlC,IChBkCA,EDgB5B1D,CDME,ECNC,GChBmC,ADgBhCsC,QAAQ,CAACoC,aAAT,CAAuBN,KAAK,CAACd,GAA7B,CAAZ;ADOK,AEvBuC,AHqB5C,ADEJ7C,MAAM,CCFE,ADEDC,ICFKQ,CAAC,EDEb,CCFgB,CAAZ,CDEanB,CCFEmB,CAAC,GAAGC,GAAnB,EAAwBD,CAAC,CDE7B,CCFI,EAA8B;ACG7B,ADFG,AELJ,GDGO,GCHJkD,EFKKnC,CCED,ECPC,CAACgC,CDOCd,ADFG,GAAGzB,CELhB,EAAgB,CDOC,ADFG,CCEF4B,ADFGtB,GCEX,KAAgBK,EDFV,CAAgBnB,CAAhB,CAAZ,ECE6B,CAACoC,GAAxB,IAA+BH,OAAO,CAAClD,GAAR,KAAgBoC,OAAO,CAACpC,GAA1D,EAA+D;AAClE,AExBJ,AHsBI2B,AELA+C,IFKA/C,AELA+C,IDOIpB,CExBF,CHsBI,AELA,CFKC1B,AELA+C,IAAP,CFKA,AELYR,IDOI,CCPC,CAACH,CDOCT,ICPnB,EAAyBK,GDOG,CAACV,GCP7B,CAAiC,GDOL,EAAUd,KCPLpC,EDOL,CAA5B,ACPoC,EAAI;AChBxCqD,AHsBAxB,AELI,ICjBJwB,AHsBAxB,GGtBG,EAAHwB,CDiBUpD,CFKH,CGvBL,AHuBM+B,GELO,EFKR,CELWmC,CFKHxC,IELQ,CAACqC,CFKjB,EAAgBtC,EELL,CAAY1B,GAAZ,CFKX,AELH,CFKJ;ACGA,AExBAgE,AHsBH,AELOlE,GFJ4B,CGbhCkE,AHwBJ,EEPQlE,EDODwD,CExBE,EAALU,KAFE,EDmBc,CAACjE,CDOjB,EAAiB,ACPD,EAAMC,GAAN,EAAWC,KAAX,CAAZ;ADQAiC,AExBJuB,ADiBC,ICjBDA,CDcA,CDUIvB,MExBI,EAARuB,IFwBgB,CAACN,IAAb,CAAkB;AAAChB,AE3BrB,ADqBL,GCrBD,KF2B2BA,IAAI,EAAEX,KAAK,CAACF,KAAb;AAAoBoB,AEtBjD,AHsBG,MAAGZ,ECA2CY,KAAK,EAAEY,KDArD,EAAmB;ACAO,ADCtBrB,AELJkC,EAAAA,EFKIlC,GCDI,ACJH,CAACwB,QFKU,AELhB,CFKiBhC,AELFmC,IFKC,EAAO9B,CELvB,CAAuB,UAAAE,EFKP,CAAZ,EELwB,EAAI;ADK3B,AErBT,AHsBK,AELG4C,ICjBFmB,ADiBEnB,KCjBG,CDiBG,CAAC5C,CCjBD,IDiBA,EAAQjC,GAAR,CAAN;AChBJ0E,AHsBH,AELI,ECjBDA,CDeA,YCfa,EAAbA,aADU;AFuBNjB,AErBJmC,ADkBA,EClBAA,EFqBInC,KCHGzD,EClBE,CDkBT,CClBA4F,GFqBgB,CAACzC,OAAO,CAACO,QAAT,EAAmBrB,OAAO,CAACqB,QAA3B,EAAqC9B,MAArC,EAA6CD,OAA7C,CAAZ;AACH,AExBS,AHyBd,AEJC,CCrBD,EFgBW,MAQA,ADCFO,YAAT,CAAsBR,IAAtB,EAA4BK,cAA5B,EAA4C;ACApCI,ADCJrB,EAAAA,CAAC,CCDGqB,ADCFpB,IAAF,CAAOgB,OCDS,CAACqB,IAAb,CAAkB,CDCtB,EAAuB,UAASjB,YAAT,EAAuB;ACDvBC,AEpB3B,AHsBQ,AEJR,MDE2BA,GEpBlB6D,ADkBApB,CDEsB,EAAEpD,ADEjBU,GEJhB,CClBA,ADkBgBiC,CDEsB,AEpBrBzB,CFoBsBtB,GCFvC,CClBA,CDkBuByD,CClBC,AHsBI,CCFF,ADEG1C,IAArB,GEJR,EAAkC;ADEcV,AEnB5C,AHsBQ,AEJR,MDC4CA,GEnBrC,ADkBAoD,CDCyC,CDGnCzD,CCHqCgB,MDG1C,AEJQ,CAAC0C,WAAV,CAAsBpE,QAAQ,CAACyD,KAAD,CAA9B,CAAP,IClBkBzB,KAAK,CAACuD,IAAjB,CAAP;AFmBsB,AElBzB,AHsBe,AEJf,KDAO,ODIY7D,OAAO,GAAI,OAAOF,YAAY,CAACT,IAApB,KAA6B,QAA9B,GACZY,QAAQ,CAACC,cAAT,CAAwBb,IAAxB,CADY,GAEZf,QAAQ,CAACwB,YAAY,CAACT,IAAd,CAFV;ACHX,ADMWA,QAAAA,IAAI,CAACc,UAAL,CAAgBC,YAAhB,CAA6BJ,OAA7B,EAAsCX,IAAtC;AACA,AENhB,IClBMyE,KDkBG5B,eAAT,CAAyBD,SAAzB,EAAoC3B,KAApC,EAA2C;ADCvC,ACAA,MDAGR,ACAC6C,IAAJ,CADuC,CAGvC,MDFe,CAAC5D,MAAhB,EAAwB;AACpBO,ADKI,ICLJA,OAAO,ADKEJ,CCLDM,IDKJ,CCLG,CAAP,GAAiBM,YAAjB;AACH,ADKWO,AEJZ,MAAG4B,EFIS5B,OEJA,CFIQ,AEJPuC,CFIQvD,IAAD,EAAOS,EEJxB,IAAuBmC,MFIa,CAAC3B,EEJL,CAACsC,EFIhB,CAAR,MEJc,CAAoBJ,MAA9C,EAAsD;ADAzD,ADKe,AEJRG,IAAAA,IAAI,GAAG,IAAIV,SAAJ,CAAc3B,KAAd,CAAP,CADkD,CAEtD;AACC,GAHD,MAGO;ADDX,ADIY,AEFJqC,IAAAA,IAAI,CDFHvB,EDIQjC,AEFF,IFEH,AEFO8C,MDFnB,CAAsBX,ECEP,CAAchB,KAAd,CAAP,EDFR,EAAmCiB,WAAnC,EAAgDhC,MAAhD,EAAwDD,OAAxD,EAAiE;AAC7DgC,ADIY,AEFRqB,EDFJrB,ECEIqB,IAAI,CAACE,GFEMxD,CCJJ,GAAGiC,ADIK,CAACf,GEFhB,GAAmB0B,IDFE,CDIb,EAAqB,CCJJ,CCEzB,CDFJ;AAEAX,ADGgBjC,ECHhBiC,QDGgBjC,GCHL,CAACmC,ADGQ,CAACjB,MCHrB,CAAoB,IDGJ,GAAmBT,GCHdF,KAAD,EAAQf,CAAR,CDG2B,CCHb,ADGc2B,OAAhC;ACFZ,ADGS,AEHTmC,IAAAA,IDAIlB,ACAA,CFCI,AEDHe,MFGU,AEHf,CDAY,ECAE,CDACjB,WAAW,ACAD,CDAE1C,CAAD,CAA1B;AACAU,ADGYF,AEHR,IDAJE,MAAM,ADGMF,CCHLG,ECAI,CFGK,CAACiB,CCHjB,ECAgBoC,MFGJ,GAAiB/C,EEHlB,CAAiBQ,KAAjB,CAAP,GFGqC,CAACE,OAA9B;ACFZf,ADGS,AEHR,IDADA,CCFA,MDEO,CAACG,KAAD,EAAQ6B,QAAR,EAAkBlC,MAAlB,EAA0BD,OAA1B,CAAP;AACH,ACAA,GDJD;AAKH,ADEe,6BGjCH;AACL,AD+BJ,SAAOqD,IC/BG,AD+BV,sDC/BiC,KAAKrC,KAAL,CAAWuD,IAAlC,CAAN;AFgCR,AE/BK,AHgCO,AEDX,SDAQ1C,SAAT,CAAmBL,OAAnB,EAA4Bd,OAA5B,EAAqC;AACjC,ADCY,MCDR0B,KAAK,GAAG,ADCM,CCDlB,GDCsBhB,KAAJ,CAAU,wBAAwBZ,YAAY,CAACC,IAA/C,CAAN;ACAZ,ADlBI,AEkBR,MDAQ4B,GCACQ,KDAO,GAAGrB,OAAO,CAACc,CCA3B,CAA2BK,GDAR,IAAiB,EAAhC,ACAJ,EAAsC3B,KAAtC,EAA6C;ADCzC,ADCC,AEDD,GFpBA,GCoBIuB,ACAD,CAACI,ODAQ,ECAC,CDAEjC,ACADoC,IAAd,EAAoB,CDAE,CAACR,KAAR,IAAiB,EAAhC;AACA,ACAI,ECtCe+B,IFsCf/F,CEtCoB,CAAC2F,ADsClBtB,CDAP,EAASpE,KAAT,CCAgB,CAACiF,kBAAb,EAAiC;ADCrC,ADCA,AEDQb,MDAJf,ACAIe,GFCD5C,IAAP,EEDiB,CAACyD,EDAF,GAAG,EAAnB,WCAQ;ACjCZ,AHmCC,AEDQ,IClCHiB,QAAQ,GAAG;AFmCb,AElCAvB,ADkCC,EClCDA,CD8BA,IDII5E,CElCE,CDkCC,CDAP,AElCQ,GDkCEqE,CDACN,QAAX,ACAmB,CAACoB,CDAC,EElCZhB,KAAD,EAAQU,SAAR,EAAsB,IDkCvB,EAAwC;ADC3C5E,AElCA4E,AHmCR,AEDQR,IDAApE,AElCA4E,ADkCAR,KDAK,ADCJ5B,GCDOsB,CElCC,ADkCA,CClCCqC,ADkCAjB,GFClB,CAAmB1D,ECDK,CAACzB,CDCzB,CGnCQ,CFkCgB,ADCC0C,CCDjB,CElCsB,EAAtB,CHmCR,EAAgC,QEDxB,CAAoCA,KAApC;ACjCA,AHmCJ,AEDC,OFCG,IGnCOkC,AHmCH5E,GAAR,IGnCiB,AHmCF0C,CGnCGyB,IHmClB,CGnCiB,CHmCK,CGnCGU,SAAR,CAAb;AFmCA,AElCH,AHmCG,QCDGZ,ADCAvB,KAAK,CAAC1C,ECDE,CAACA,ADCJ,CAAL,ECDQ,CAAR,EDCe,GCDGC,EDCE,GCDvB,CDCA,CCD4B,CDCC;ACAzB6D,AEvCK,AHwCLrC,AEDR4C,CCvCJ,CDuCIA,IDAQP,ADCArC,IAAI,CCDC,ADCAlB,AEDJ,CAACmC,KAAV,GAAkBA,KAAlB,CFCQ,CAAqB1C,GAArB;ACAAsD,AEjCZ6C,AHkCS,AEDLf,EAAAA,GFDI,CCCI9B,EEjCJ,CAACsB,EHkCM,IGlCf,CACI,CDgCe,CDAK,ACAJP,CDAKrE,GAAD,CAAZ,GAAoBiE,CCAb,CAAf,MDAoC,CAACjE,GAAD,CAA5B,UE/BJ,oBAAC,OAAD;AFgCC,AEhCQ,AHiCL,AEDX,EChCgB,ADkCjB,IClCqB,EAAC,EHiCNC,KAAK,GAAGyC,KAAK,CAAC1C,GAAD,CAAjB;ACAP,AEjCG,AHkCIF,EGnCR,EAEI,EHiCIA,YAAY,CAAC2B,IAAD,CGjCf,CHiCsBzB,GAAP,EAAYC,CGjC5B,IHiCgB,CAAZ;AGjCK,AHkCR,EGlCQ,IAAI,EAAC;AFkClB,AElCI,AHmCH,AEDL,ECpCI,EAGI,GFiCAD,ECACoF,CDAL,IAAWnB,QAAX,EAAqB,AEjChB,ADiCT,CAAyBI,OCjCjB,EDiCR,EAAoC;ADC5BpE,AElCU,AHmCjB,AEDG,EClCc,EFkCVA,EElCc,ADkCduE,EClCe,CFkCV,CCAT,EDAYP,QAAQ,CAACjE,GAAD,CAAhB;AElCA,ADmCJ,ECtCA,CADJ,EAMIqC,CDiCMgD,OCjCE,CAACgB,ADiCK,GAAGhC,SAAS,CAACO,CCjC3B,CAAwB,IDiCP,ECjCjB,ADiCA,CCvCJ,ADqCoC,CAIhC;ADDI,ADCRpE,MAAM,CAACC,CCDI,CAACsD,KDCZ,GCDoB,ADCHvC,CCDI0C,IDCrB,UCDY,CAAwBlE,GAAxB,CAAJ,EAAkC;AAC9B8D,ACCR,ICjCEwC,EFgCMxC,ACCLO,KDDU,ICCD,CAACG,IAAV,IAAkBH,SAAS,CAACiB,mBAA/B,EAAoD;ADA5ChC,ACCJe,IAAAA,EDDIf,OCCK,CAACgC,IDDM,CAACtF,GAAD,CAAZ,GAAoBiE,OCCxB,CDDgC,CAACjE,GAAD,CAA5B;AACH,ACCJ,GAP+B,CAShC;ADFC;;AAED,AEpCA,ADqCA,MDDG8D,ACCA,CAACO,IDDI,KAAK,ACCA,CDDb,ACCcG,EDDE,AEpCJ9B,EDqCZ,EAAoB,CCrCpB,EFoCuB,AEpCJ,IFoCH;AAChB,AErCmB,ADsCf8B,IAAAA,IAAI,CDDDlB,ECCI5C,QAAQ,CAAC2E,CDDpB,OCCmB,CAAf,CADgB,CAEpB;ADDH,ACEI,GAHD,MAGO;ACxCY,ADyCf,QAAIE,EAAE,GAAGxC,IAAI,CAACsB,SAAS,CAACmB,YAAX,EAAyBH,QAAzB,CAAb;ADAR7E,MAAM,CAACC,OAAP,GAAiBsC,IAAjB;AExCQ,ADyCAyB,IAAAA,IAAI,GAAGhD,KAAK,CAAC6C,SAAS,CAACG,IAAX,EAAiBe,EAAjB,CAAZ,6CCzCM7C,KAAN;AAEA,ADwCH,GAhB+B,CAkBhC,MC1CSkD,KAAL,GAAa;AACTW,MAAAA,GAAG,EAAG;AADG,KAAb;AAHe,AD8CnB,MAAGlC,SAAS,CAACG,IAAb,EAAmB;ACxClB,ADyCG,QAAGH,SAAS,CAACoB,kBAAb,EAAiC;AAC7BpB,MAAAA,SAAS,CAACoB,kBAAV;AACH,KAHc,CAInB;;AACC,GALD,MAKO,IAAGpB,SAAS,CAACqB,iBAAb,EC3Ce,AD2CiB;AC1CnCc,AD2CAnC,IAAAA,EC3CAmC,OAAO,AD2CE,CC3CDC,AD2CEf,GC3CV,CAAY,QAAZ,KD2CA;AC1CH,AD2CA,GA1B+B,CA4BhC;;;AACArB,EAAAA,SAAS,CAACmB,YAAV,GAAyBH,QAAzB,CA7BgC,CA8BhC,IC7CqB;AACjBmB,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACH,AD4CDpC,EAAAA,SAAS,CAACG,IAAV,GAAiBA,IAAjB;AACH;;IAEKmB,0BC7CQ;AACN,WAAKe,QAAL,CAAc;AACVH,QAAAA,GAAG,EAAE,KAAKX,KAAL,CAAWW,GAAX,GAAiB;AADZ,AD6ClB,OC7CI,gBD6CoB;AC1CvB,AD0CuB,QAAZ7D,KAAY,uEAAJ,EAAI;;AAAA;6BCxCf;AACL,ADwCA,SAAKkD,ICvCD,CDuCJ,GAAa,EAAb;ACvCS,ADwCT,QCxCS,CDwCJlD,KAAL,CCxCgB,EAAE,ADwCLA,KCxCUiE,ADwCvB,OCxCkB,CAAaC,IAAb,CAAkB,IAAlB;AAAd,ADyCP,SCxCW,4CAAa,KAAKhB,KAAL,CAAWW,GAAxB,CADJ,EAEI,0CAFJ,CADJ;AAMH;;;6BDsCQV,aAAa;AAClBnB,ECrEcqB,IDqEdrB,CCrEmB,CAACiB,IDqEd,CAACG,MAAP,CAAc,KAAKF,KAAnB,EAA0BC,WAA1B;AACAT,MAAAA,eAAe,CAAC,IAAD,CAAf;ACrCRe,ADsCK,QCtCG,CAACvB,MAAT,CACI,oBAAC,OAAD,OADJ,EAEIvC,QAAQ,CAACgE,cAAT,CAAwB,MAAxB,CAFJ,GAKA;;AAEA,IAAIQ,EAAE,GACF,iCACI,sCADJ,EAEI,sCAFJ,CADJ;AAMA,IAAIC,EAAE,GACF,iCACI,sCADJ,EAEI,mCAFJ,CADJ;AAOA,IAAIC,CAAC,GAAGhE,IAAI,CAAC8D,EAAD,EAAIC,EAAJ,CAAZ,EACA;;ADoBAtG,MAAM,CAACC,OAAP,CAAeG,OAAf,GAAyBF,QAAzB;AACAF,MAAM,CAACC,OAAP,CAAemE,MAAf,GAAwBA,MAAxB;AACApE,MAAM,CAACC,OAAP,CAAekF,SAAf,GAA2BA,SAA3B","file":"js.00a46daa.js","sourceRoot":"..","sourcesContent":["function setAttribute(dom, key, value) {\r\n    if(key === 'className') key = 'class';\r\n\r\n    if(/on\\w+/.test(key)) {\r\n        key = key.toLowerCase();\r\n        dom[key] = value || '';\r\n    } else if(key = 'style') {\r\n        if(!value || typeof value === 'string') {\r\n            dom.style.cssText = value || '';\r\n        } else if (value && typeof value === 'object') {\r\n            for(let cssname in value) {\r\n                dom.style[cssname] = value[cssname] + typeof value[cssname] === 'number' ? 'px' : '';\r\n            }\r\n        }\r\n    } else {\r\n        if(key in dom) {\r\n            dom[key] = value || '';\r\n        }\r\n\r\n        if(value) {\r\n            dom.setAttribute(key, value);\r\n        } else {\r\n            dom.removeAttribute(key);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nmodule.exports = setAttribute;","const __render = require('./render').__rende;\r\nconst setAttribute = require('./setAttribute');\r\n\r\nconst _ = {};\r\n_.each = function each(array, fn) {\r\n    for(var i = 0, len = array.length; i < len; i ++ ) {\r\n        fn(array[i], i);\r\n    }\r\n}\r\n\r\nconst REPLACE = 0;\r\nconst REORDER = 1;\r\nconst PROPS = 2;\r\nconst TEXT = 3;\r\n\r\nfunction patch(node, patches) {\r\n    var walker = {index: 0};\r\n    dfsWalk(node, walker, patches);\r\n    return node;\r\n}\r\n\r\nfunction dfsWalk(node, walker, patches) {\r\n    let currentPatches = patches[walker.index];\r\n\r\n    let len = node.childNodes ? node.childNodes.length : 0;\r\n\r\n    for(let i = 0; i < len; i ++) {\r\n        let child = node.childNodes[i];\r\n        walker.index ++;\r\n        dfsWalk(child, walker, patches);\r\n    }\r\n\r\n    //将当前节点的修改记录进行真实的dom修改\r\n    if(currentPatches) {\r\n        applyPatches(node, currentPatches);\r\n    }\r\n}\r\n\r\nfunction applyPatches(node, currentPatches) {\r\n    _.each(currentPatches, function(currentPatch) {\r\n        switch (currentPatch.type) {\r\n            case REPLACE:\r\n                var newNode = (typeof currentPatch.node === 'string')\r\n                ? document.createTextNode(node)\r\n                : __render(currentPatch.node);\r\n                node.parentNode.replaceChild(newNode, node);\r\n                break;\r\n            case PROPS:\r\n                setProps(node, currentPatch.props);\r\n                break;\r\n            case TEXT:\r\n                if(node.textContent) {\r\n                    node.textContent = currentPatch.content;\r\n                } else {\r\n                    node.nodeValue = currentPatch.content;\r\n                }\r\n                break;\r\n            default:\r\n                throw new Error('Unknown patch type ' + currentPatch.type);\r\n        }\r\n    })\r\n\r\n    return node;\r\n}\r\n\r\nfunction setProps (node, props) {\r\n    for(let key in props) {\r\n        if(props[key] === void 1127) {\r\n            node.removeAttribute(key);\r\n        } else {\r\n            let value = props[key];\r\n            setAttribute(node, key, value);\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = patch;\r\n","const REPLACE = 0;\r\nconst REORDER = 1;\r\nconst PROPS = 2;\r\nconst TEXT = 3;\r\n\r\nconst patch = {}\r\n\r\npatch.REPLACE = REPLACE;\r\npatch.REORDER = REORDER;\r\npatch.PROPS = PROPS;\r\npatch.TEXT = TEXT;\r\n\r\nfunction diff(oldTree, newTree) {\r\n    var walker = {index: 0};\r\n    var patches = {};\r\n    dfsWalk(oldTree, newTree, walker, patches);\r\n    return patches;\r\n}\r\n\r\nfunction dfsWalk(oldNode, newNode, walker, patches) {\r\n    let currentPatch = [];\r\n    let index = walker.index;\r\n\r\n    if(newNode === null) {\r\n\r\n    } else if((typeof oldNode === 'string' && typeof newNode === 'string') || (typeof oldNode === 'number' && typeof newNode === 'number')) {\r\n        if(newNode !== oldNode) {\r\n            currentPatch.push({type: patch.TEXT, content: String(newNode)});\r\n        }\r\n    } else if(oldNode.tag === newNode.tag && oldNode.key === newNode.key) {\r\n        let propsPatches = diffProps(oldNode, newNode);\r\n\r\n        if(propsPatches) {\r\n            currentPatch.push({type: patch.PROPS, props: propsPatches})\r\n        }\r\n\r\n        diffChildren(oldNode.children, newNode.children, walker, patches);\r\n    } else {\r\n        currentPatch.push({type: patch.REPLACE, node: newNode})\r\n    }\r\n\r\n    if(currentPatch.length) {\r\n        patches[index] = currentPatch;\r\n    }\r\n}\r\n\r\nfunction diffChildren(oldChildren, newChildren, walker, patches) {\r\n    oldChildren = oldChildren || [];\r\n\r\n    oldChildren.forEach((child, i) => {\r\n        let newChild = newChildren[i];\r\n        walker.index ++;\r\n        dfsWalk(child, newChild, walker, patches);\r\n    })\r\n}\r\n\r\nfunction diffProps(oldNode, newNode) {\r\n    let count = 0;\r\n    let oldProps = oldNode.attrs || {};\r\n    let newProps = newNode.attrs || {};\r\n    let key, value;\r\n    let propsPatches = {};\r\n\r\n    for(key in oldProps) {\r\n        value = oldProps[key];\r\n\r\n        if(newProps[key] !== value) {\r\n            count ++;\r\n            propsPatches[key] = newProps[key];\r\n        }\r\n    }\r\n\r\n    for(key in newProps) {\r\n        value = newProps[key];\r\n\r\n        if(!oldProps.hasOwnProperty(key)) {\r\n            count ++;\r\n            propsPatches[key] = newProps[key];\r\n        }\r\n    }\r\n\r\n    if(count === 0) return null;\r\n    return propsPatches;\r\n}\r\n\r\n\r\nmodule.exports = diff;","const setAttribute = require('./setAttribute');\r\nconst patch = require('./patch');\r\nconst diff = require('./diff');\r\n\r\nfunction __render(vnode) {\r\n    \r\n    if(typeof vnode === 'number') {\r\n        vnode = String(vnode);\r\n    }\r\n\r\n    if(typeof vnode === 'string') {\r\n        const textNode = document.createTextNode(vnode);\r\n        return textNode;\r\n    }\r\n\r\n    if(typeof vnode.tag === 'function') {\r\n        const component = createComponent(vnode.tag, vnode.attrs);\r\n        setComponentProps(component, vnode.attrs);\r\n        return component.base;\r\n    }\r\n\r\n    const dom = document.createElement(vnode.tag);\r\n    if(vnode.attrs) {\r\n        Object.keys(vnode.attrs).forEach(key => {\r\n            const value = vnode.attrs[key];\r\n            setAttribute(dom, key, value);\r\n        })\r\n    }\r\n\r\n    vnode.children.forEach(child => {\r\n        render(child, dom);\r\n    })\r\n\r\n    return dom;\r\n}\r\n\r\nfunction render(vnode, container) {\r\n    return container.appendChild(__render(vnode));\r\n}\r\n\r\nfunction createComponent(component, props) {\r\n    let inst;\r\n\r\n    // 如果是类定义组件，则直接返回实例\r\n    if(component.prototype && component.prototype.render) {\r\n        inst = new component(props);\r\n    // 如果是函数定义组件，则将其扩展为类定义组件 \r\n    } else {\r\n        inst = new component(props);\r\n        inst.constructor = component;\r\n        inst.render = function() {\r\n            return this.constructor(props);\r\n        }\r\n    }\r\n\r\n    return inst;\r\n}\r\n\r\nfunction setComponentProps(component, props) {\r\n    if(!component.base) {\r\n        if(component.componentWillMount) {\r\n            component.componentWillMount();\r\n        }\r\n    } else if(component.componentWillReceiveProps) {\r\n        component.componentWillReceiveProps(props);\r\n    }\r\n\r\n    component.props = props;\r\n    renderComponent(component);\r\n}\r\n\r\n// 组件渲染流程\r\nfunction renderComponent(component) {\r\n    let base;\r\n    const renderer = component.render();\r\n\r\n    // 不是第一次渲染触发componentWillUpdate\r\n    if(component.base && component.componentWillUpdate) {\r\n        component.componentWillUpdate();\r\n    }\r\n\r\n    // 第一次渲染直接vdom变成真实Dom\r\n    if(!component.base) {\r\n        base = __render(renderer);\r\n    // 不是第一次进行diff算法对比后更新dom\r\n    } else {\r\n        let _d = diff(component.preVnodeTree, renderer);\r\n        base = patch(component.base, _d);\r\n    }\r\n\r\n    // 不是第一次渲染触执行componentDidUpdate\r\n    if(component.base) {\r\n        if(component.componentDidUpdate) {\r\n            component.componentDidUpdate();\r\n        }\r\n    // 第一次渲染执行componentDidMount\r\n    } else if(component.componentDidMount) {\r\n        component.componentDidMount();\r\n    }\r\n\r\n    // 保存本次vdom，以便下次更新使用\r\n    component.preVnodeTree = renderer;\r\n    // 保存本次dom，以便下次在此基础上更新\r\n    component.base = base;\r\n}\r\n\r\nclass Component {\r\n    constructor(props = {}) {\r\n        this.state = {};\r\n        this.props = props;\r\n    }\r\n\r\n    setState(stateChange) {\r\n        Object.assign(this.state, stateChange);\r\n        renderComponent(this);\r\n    }\r\n}\r\n\r\nmodule.exports.__rende = __render;\r\nmodule.exports.render = render;\r\nmodule.exports.Component = Component;\r\n","const render = require('./render').render;\r\nconst renderComponent = require('./render').renderComponent;\r\nconst Component = require('./render').Component;\r\nconst diff = require('./diff');\r\n\r\nfunction createElement(tag, attrs, ...children) {\r\n    return{\r\n        tag,\r\n        attrs,\r\n        children\r\n    }\r\n}\r\n\r\nconst React = {\r\n    createElement,\r\n    Component\r\n}\r\n\r\nfunction Welcome(props) {\r\n    return <h1>hello,{props.name}</h1>;\r\n}\r\n\r\nclass Welcome2 extends React.Component{\r\n    render() {\r\n        return<h1>hello-components2,{this.props.name}</h1>\r\n    }\r\n}\r\n\r\nconst ReactDOM = {\r\n    render: (vnode, container) => {\r\n        container.innerHTML = '';\r\n        return render(vnode, container);\r\n    }\r\n}\r\n\r\nReactDOM.render (\r\n    <div>\r\n        <Welcome name=\"tianye1\"/>\r\n        <Welcome name=\"tianye2\"/>\r\n        <Welcome2 name=\"tianye3\"/>\r\n    </div>,\r\n    document.getElementById('root')\r\n)\r\n\r\nclass Counter extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            num : 0\r\n        }\r\n    }\r\n\r\n    componentWillUpdate() {\r\n        console.log('update');\r\n    }\r\n\r\n    componentWillMount() {\r\n        console.log('mount');\r\n    }\r\n\r\n    onClick() {\r\n        this.setState({\r\n            num: this.state.num + 1\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div onClick={this.onClick.bind(this)}>\r\n                <h1>number: {this.state.num}</h1>\r\n                <button>add</button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nReactDOM.render(\r\n    <Counter />,\r\n    document.getElementById('main')\r\n)\r\n\r\n//test diff\r\n\r\nvar d1 = (\r\n    <div>\r\n        <h1>123</h1>\r\n        <span>r</span>\r\n    </div>\r\n)\r\nvar d2 = (\r\n    <div>\r\n        <h1>456</h1>\r\n        <p>r</p>\r\n    </div>\r\n)\r\n\r\nvar a = diff(d1,d2)\r\n// console.log(a)\r\n"]}